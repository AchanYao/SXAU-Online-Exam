webpackJsonp([13],{RLXn:function(t,e){},VvPw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("gRE1"),o=a.n(n),i=a("MUCl"),l={data:function(){return{isDev:null,downloadLoading:!1,tableDataLoading:!1,tableData:[],filename:"",autoWidth:!0,refresh:!0,percentageNum:100,timer:0,updateTime:"",currentPage:1,totalPage:1,pageSize:5,keyword:""}},methods:{_getTable:function(){var t=this;this.tableDataLoading=!0,Object(i.c)(this.currentPage,this.pageSize).then(function(e){t.tableData=e.data.records,t.totalPage=e.data.pages}).finally(function(){t.tableDataLoading=!1})},handleDownload:function(){var t=this;this.downloadLoading=!0,a.e(24).then(a.bind(null,"zWO4")).then(function(e){var a=t.tableData,n=t.formatJson(["影片","上映天数","累计票房","实时票房","票房占比","排片占比","上座率","排座占比","场次","人次","场均人次","场均收入","平均票价"],a);e.export_json_to_excel({header:["影片","上映天数","累计票房","实时票房","票房占比","排片占比","上座率","排座占比","场次","人次","场均人次","场均收入","平均票价"],data:n,filename:t.filename||"excel-list",autoWidth:t.autoWidth}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"影片"===t?e.movieName:e[t]})})},formatMovieData:function(t){t.forEach(function(t){o()(t.attribute).forEach(function(e,a,n){t[e.attrName]=e.attrValue})})},handleDelete:function(t,e){this.$message({message:"index: "+t+", id: "+e.id,type:"info"})},handleSearch:function(){var t=this;null!==this.keyword&&0!==this.keyword.trim().length?(this.tableDataLoading=!0,this.downloadLoading=!0,Object(i.d)(this.currentPage,this.pageSize,this.keyword.trim()).then(function(e){t.tableData=e.data.records,t.totalPage=e.data.pages}).finally(function(){t.tableDataLoading=!1,t.downloadLoading=!1})):this._getTable()},confirmDelete:function(t){var e=this;this.$confirm("此操作将永久删除该教师, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.a)(t).then(function(){e.$message({type:"success",message:"删除成功!"}),e._getTable()})}).catch(function(){})}},mounted:function(){},watch:{currentPage:{handler:function(t,e){this._getTable()},immediate:!0}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-row",{staticClass:"row-bg",attrs:{justify:"end",type:"flex"}},[a("el-col",{attrs:{lg:8,md:20}},[a("el-input",{attrs:{autosize:"",placeholder:"关键字搜索","prefix-icon":"el-icon-search"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("el-col",{attrs:{lg:2,md:3}},[a("el-button",{staticStyle:{margin:"0 0 10px 10px"},attrs:{loading:t.downloadLoading,icon:"document",type:"primary"},on:{click:t.handleSearch}},[t._v("搜索\n      ")])],1),t._v(" "),a("el-col",{attrs:{lg:2,md:1,sm:1}},[a("el-button",{staticClass:"timer",attrs:{icon:"el-icon-refresh",type:"text"},on:{click:t._getTable}},[t._v("重置搜索")])],1)],1),t._v(" "),a("el-container",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableDataLoading,expression:"tableDataLoading"}],staticStyle:{width:"100%",margin:".5rem","min-height":"300px"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"教师号",prop:"number",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"身份证号","min-width":"170",prop:"idNumber",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0===e.row.email.length?"该用户没有填写身份证号":e.row.email.length)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"邮箱",prop:"email",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0===e.row.email.length?"该用户没有设置邮箱":e.row.email.length)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"联系电话","min-width":"150",prop:"phone",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0===e.row.phone.length?"该用户没有设置联系电话":e.row.phone.length)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"}},[t._v("重置密码\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.confirmDelete(e.row.id)}}},[t._v("删除\n          ")])]}}])})],1)],1),t._v(" "),a("el-row",{attrs:{justify:"center",type:"flex"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,disabled:t.tableDataLoading,"page-count":t.totalPage,"page-size":t.pageSize,layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,r,!1,function(t){a("RLXn")},"data-v-7f8a5fe2",null);e.default=c.exports}});
//# sourceMappingURL=13.27cd004539b4e653b5ab.js.map